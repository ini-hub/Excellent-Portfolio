---
// src/components/PhotoGallery.astro

interface GalleryImage {
    id: string;
    src: string;
    alt: string;
    caption: string;
}
// NOTE: The data must be passed as a prop from index.astro for this component to work!
interface Props {
    items: GalleryImage[];
}

const { items } = Astro.props;
---
<section id="gallery" 
    class="
        p-10 lg:px-[10%] xl:px-40 mb-5 mx-auto bg-white
        border-t-2 border-deep-blue w-full my-5
        "
>
    <h2 class="text-deep-blue text-3xl font-bold mb-6">Sharing Knowledge: Conferences & Community</h2>
    <p class="mb-6">I believe in fostering a culture of cross-functional collaboration and technical excellence. Below are moments from speaking engagements, team leadership, and industry events.</p>
    
    {/* Optimized Grid Layout: 2 columns on mobile, 3 on medium, 4 on large */}
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-5">
        {items.map((item: GalleryImage) => (
            <figure class="                
                p-4 
                border border-gray-200 rounded-lg bg-gray-50 
                shadow-sm transition duration-300 ease-in-out hover:shadow-lg
                group/figure /* Parent for hover effects */
            ">
                
                <div class="flex flex-col h-full"> 
                    
                    {/* IMAGE BLOCK: Fixed height container */}
                    <div class="h-36 mb-3 flex items-center justify-center">
                        
                        {/* CRITICAL CHANGE: Removed href, added gallery-trigger class and data attributes */}
                        <a href="#"
                            class="block w-full h-full gallery-trigger cursor-pointer" 
                            data-img-src={item.src}
                            data-img-alt={item.alt}
                        > 
                            <img 
                                src={item.src} 
                                alt={item.alt}
                                class="
                                    w-full h-full object-cover 
                                    rounded-md cursor-pointer 
                                    transition duration-200 hover:translate-y-[-3px]
                                "
                            >
                        </a>
                    </div>
                    
                    {/* CAPTION BLOCK: Truncation and Hover Display */}
                    <figcaption class="
                        text-sm text-gray-700 font-semibold 
                        py-1 mt-auto 
                        overflow-hidden 
                        line-clamp-2 
                        group-hover/figure:line-clamp-none 
                        group-hover/figure:whitespace-normal
                        " 
                        set:html={item.caption} 
                    />
                </div>
            </figure>
        ))}
    </div>
</section>